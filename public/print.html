<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Genesis Biology – Registration Receipt</title>

  <!--  Bootstrap 5  -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <style>
    /* ----------  PRINT OVERRIDES ---------- */
    @media print {
      @page {
        size: A4;
        margin: 0.5cm;
      }
      body {
        margin: 0;
        padding: 0;
        background: #fff !important;
      }
      .receipt {
        margin: 0;
        padding: 10px;
        box-shadow: none;
        max-width: none;
      }
      .header {
        margin-bottom: 10px;
        padding-bottom: 8px;
      }
      .header img {
        height: 50px;
        margin-bottom: 8px;
      }
      .details td {
        padding: 6px 12px;
        font-size: 0.85em;
      }
      .alert {
        margin: 12px 0;
        padding: 8px;
      }
      .footer {
        margin-top: 12px;
        padding-top: 8px;
        font-size: 0.85em;
      }
      .no-print,
      .btn-print {
        display: none !important;
      }
      * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
      }
    }

    /* ----------  SCREEN STYLES ---------- */
    body {
      background: #f8f9fa;
    }
    .receipt {
      max-width: 800px;
      margin: 40px auto;
      padding: 30px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
    }
    .header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #28a745;
    }
    .header img {
      height: 80px;
      margin-bottom: 15px;
      border-radius: 8px;
    }
    .details {
      margin: 20px 0;
    }
    .details td {
      padding: 12px 20px;
      border-color: #dee2e6;
      vertical-align: middle;
    }
    .details td:first-child {
      width: 30%;
      font-weight: 500;
      text-align: left;
    }
    .details td:last-child {
      width: 70%;
      color: #28a745;
      font-weight: 600;
      text-align: right;
    }
    .footer {
      text-align: center;
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #dee2e6;
      color: #6c757d;
    }
    .btn-print {
      background: linear-gradient(135deg, #28a745, #218838);
      color: #fff;
      padding: 12px 24px;
      border-radius: 8px;
      border: none;
      transition: all 0.3s ease;
    }
    .btn-print:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
    }
  </style>
</head>

<body>
  <div class="receipt">
    <!-- ----------  HEADER  ---------- -->
    <div class="header">
      <img src="logo.jpg" alt="Genesis Biology Logo" />
      <h2 class="mb-1">Genesis Biology</h2>
      <p class="text-muted mb-0">Excellence in NEET Preparation</p>
    </div>

    <h3 class="text-center mb-4">Registration Receipt</h3>

    <!-- ----------  DETAILS  ---------- -->
    <div class="details">
      <table class="table mb-0">
        <tbody>
          <tr>
            <td>Registration No / Roll no.: </td>
            <td id="regId">-</td>
          </tr>
          <tr>
            <td>Date:</td>
            <td id="regDate">-</td>
          </tr>
          <tr>
            <td>Student Name:</td>
            <td id="studentName">-</td>
          </tr>
          <tr>
            <td>Phone:</td>
            <td id="phone">-</td>
          </tr>
          <tr>
            <td>Date of Birth:</td>
            <td id="dob">-</td>
          </tr>
          <tr>
            <td>Father's Name:</td>
            <td id="father">-</td>
          </tr>
          <tr>
            <td>Address:</td>
            <td id="address">-</td>
          </tr>

          <!-- ======  MERGED ROW  ====== -->
          <tr>
            <td>Shift / Payment Mode:</td>
            <td>
              <span id="shift">-</span> / <span id="paymentMode">-</span>
            </td>
          </tr>
          <tr>
            <td>Payment Status:</td>
            <td>
              <span id="paymentStatus">-</span>
              <span id="dueAmountInfo" style="display: none;">
                (Due Amount: ₹<span id="dueAmount">-</span>)
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ----------  SUCCESS NOTE  ---------- -->
    <div class="alert alert-success" role="alert">
      <h4 class="alert-heading">✅ Registration Successful!</h4>
      <p class="mb-0">
        Welcome to Genesis Biology NEET Foundation Course. A WhatsApp message has been
        sent to your registered mobile number with group‑joining instructions.
      </p>
    </div>

    <!-- ----------  FOOTER  ---------- -->
    <div class="footer">
      <p class="mb-1">Thank you for choosing Genesis Biology!</p>
      <p class="mb-0">
        For support, contact:<br />
        1. +91 70055 89986 (Sir Loya)<br />
        2. +91 60099 89088 (Radip K)<br />
        3. +91 98634 61949 (Satyam M)<br />
        4. +91 84158 09253 (Ka Seitabanta)
      </p>
    </div>

    <!-- ----------  PRINT BUTTON (screen only)  ---------- -->
    <div class="text-center mt-4 no-print">
      <button onclick="window.print()" class="btn btn-print">Print Receipt</button>
    </div>
  </div>

  <!-- ----------  SCRIPT  ---------- -->
  <script>
    const params = new URLSearchParams(window.location.search);

    document.getElementById("regId").textContent       = params.get("id")           || "-";
    document.getElementById("studentName").textContent = params.get("name")         || "-";
    document.getElementById("phone").textContent       = params.get("phone")        || "-";
    document.getElementById("dob").textContent         = params.get("dob")          || "-";
    document.getElementById("father").textContent      = params.get("father")       || "-";
    document.getElementById("address").textContent     = params.get("address")      || "-";
    document.getElementById("shift").textContent       = params.get("shift")        || "-";
    document.getElementById("paymentMode").textContent = params.get("payment_mode") || "-";
    document.getElementById("regDate").textContent     = new Date().toLocaleDateString("en-IN");

    // Handle payment status and due amount
    const paymentStatus = params.get('payment_status');
    document.getElementById('paymentStatus').textContent = 
      paymentStatus === 'full' ? 'Full Payment' : 'Partial Payment';
    
    if (paymentStatus === 'partial') {
      const dueAmount = params.get('due_amount');
      document.getElementById('dueAmount').textContent = dueAmount;
      document.getElementById('dueAmountInfo').style.display = 'inline';
    }

    // Auto‑print when ?print=true
    window.onload = () => {
      if (params.get("print") === "true") window.print();
    };
  </script>
</body>
</html>
